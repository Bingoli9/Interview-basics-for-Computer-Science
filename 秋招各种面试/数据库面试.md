#### sql连表

1. Union

   UNION 操作符用于合并两个或多个 SELECT 语句的结果集。

   UNION 运算符通过组合其他两个结果表（例如 TABLE1 和 TABLE2）并消去表中任何重复行而派生出一个结果表。

   当 ALL 随 UNION 一起使用时（即 UNION ALL），不消除重复行。两种情况下，派生表的每一行不是来自 TABLE1 就是来自 TABLE2。

   注意：使用UNION时，两张表查询的结果有相同数量的列、列类型相似。

2. INNER JOIN（内连接）

   即为自然连接

3. 外连接

   LEFT/RIGHT/FULL JOIN 分别为左外连接/右外连接/外连接

#### 数据库MyISAM 和 InnodB的区别，查询数据哪个更快，底层的数据结构是什么

MyISAM类型不支持事务处理等高级处理，而InnoDB类型支持

#### 为什么Innodb支持事务（事务的四个性质）

InnoDB实现了以下几种事务的隔离级别？
- 读未提交(Read Uncommitted)
- 读提交(Read Committed, RC)
- 可重复读(Repeated Read, RR)
- 串行化(Serializable)

(1)读未提交：select不加锁，可能出现读脏；

(2)读提交(RC)：普通select快照读，锁select /update /delete 会使用记录锁，可能出现不可重复读；

(3)可重复读(RR)：普通select快照读，锁select /update /delete 根据查询条件情况，会选择记录锁，或者间隙锁/临键锁，以防止读取到幻影记录；

(4)串行化：select隐式转化为select ... in share mode，会被update与delete互斥；

InnoDB默认的隔离级别是RR，用得最多的隔离级别是RC

#### B树，B-树， B+树的区别

https://blog.csdn.net/zwz2011303359/article/details/63262541

#### Redis

- redis是内存型数据库，为了保证数据在断电后不会丢失，需要将内存中的数据持久化到硬盘上。
- redis持久化方式：全量模式、增量模式
- RDB持久化：Redis中，执行BGSAVE命令，来生成RDB文件，本质是调用fork()命令，子进程完全复制父进程的栈空间和页表，实现了copy-on-wrtite写时赋值。
- AOF持久化
- 使用Redis缓存数据时，为了提高缓存命中率，需要保证缓存数据都是热点数据。可以将内存最大使用量设置为热点数据占用的内存量，然后使用淘汰策略。
- 缓存穿透解决方法：1.将空值缓存起来，再次收到同样的查询请求时，若命中缓存并且值为空则直接返回；2.对输入的参数进行过滤。

#### Mysql性能优化

- explain、查询缓存、limit、索引、避免select*
- 除非确实需要服务器去重，否则一定要使用 UNION ALL，如果没有ALL关键字，这会导致整个临时表的数据做唯一性检查，这样做的代价非常高。
- 重构查询方式：切分大查询
- 每张表都设置一个INI型的ID做为其主键，并设置上自动增加到AUTO_INCREMENT标志
- 如果取值是有限而且是固定的，使用ENUM而不是VARCHAR

#### Mysql存储引擎

InnoDB、MyISAM区别很多，比如 InnoDB 支持外键和事务，可以使用 Commit 和 Rollback 语句 ；后者不支持。MyISAM使用 COUNT without WHERE 语句时更优，因为保存了表的行数。

#### 数据库使用B+tree的原因

1. 更少的查找次数

   平衡树查找操作的时间复杂度等于树高h，而树高大致为O(h)=O(logdN)，其中d为每个节点的出度。

   B+树的出度一般都非常大，所以红黑树的树高h很明显比B+ 树大非常多，检索的次数也就更多了。

2. 利用计算机磁盘预读特性

   为了减少磁盘 I/O，磁盘往往不是严格按需读取，而是每次都会预读。预读过程中，磁盘进行顺序读取，顺序读取不需要进行磁盘寻道，并且只需要很短的旋转时间，因此速度会非常快。

   操作系统一般将内存和磁盘分割成固态大小的块，每一块称为一页，内存与磁盘以页为单位交换数据。数据库系统将索引的一个节点的大小设置为页的大小，使得一次 I/O 就能完全载入一个节点，并且可以利用预读特性，相邻的节点也能够被预先载入。

#### 数据库索引的优缺点

优点：提高数据检索的性能。 
缺点：索引会占据物理存储空间；当向表中添加/删除数据时，索引也需动态更新，降低了插入/删除的速度

#### db性能指标

#### 服务器数据库大规模数据怎么设计

#### 一个每秒百万级访问量的互联网服务器，每个访问都有数据计算和I/O操作，如果让你设计，你怎么设计？