## JIT

### Hot Spot 编译

JVM执行代码时, 并不立即开始编译代码, 原因:  
- 如果这段代码本身在将来只会被执行一次，那么从本质上看，编译就是在浪费精力。  
因为将代码翻译成 java 字节码相对于编译这段代码并执行代码来说，要快很多。  
- 如果一段代码频繁的调用方法，或是一个循环，也就是这段代码被多次执行，那么编译就非常值得了  


### 编译器与解释器

- 当程序需要迅速启动然后执行的时候，解释器可以首先发挥作用，编译器不运行从而省去编译时间，立即执行程序

在程序运行后，随着时间的推移，编译器逐渐发挥作用，把越来越多的代码编译成本地代码之后，可以获得更高的执行效率

当程序运行环境中内存资源限制较大（如部分嵌入式系统中），可以使用解释执行来节约内存；反之，则可以使用编译执行来提升效率。

同时，解释器还可以作为编译器（C2才会激进优化）激进优化时的一个“逃生门”，让编译器根据概率选择一些大多数时候都能提升运行速度的优化手段，当激进优化假设不成立。如：加载了新类后，类型继承结构出现变化，出现“罕见陷阱（Uncommon Trap）”时，可以通过逆优化（Deoptimization）退回到解释状态继续执行
(部分没有解释器的虚拟机，也会采用不进行激进优化的C1编译器担任“逃生门”的角色)
