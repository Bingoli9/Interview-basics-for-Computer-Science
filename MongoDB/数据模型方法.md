## MongoDB文档数据模型方法
#### 嵌入
MongoDB在硬盘上连续存储文档，可以单词搜寻中抓取到所有相关的数据。  
另外，MongoDB今在单个文档级别中提供了操作的原子性，因此需要以院子方式一起更新的数据需要被  
共同放置在单个文档中。使用嵌入的方式可以同时将想要的数据在单个文档中更新。  

#### 引用
- 有时需要在数据库中进行多次搜寻来获取数据，会为查找带来额外的延迟。  
使用多个集合并且添加引用的一个原因在于，在查询数据时他能提供增强灵活性  
- 一般来说，如果应用程序可以用许多不同的方式查询数据，或者无法预料到数据可能被  
查询的模式，适合用引用  
- 具有一对多关系时，嵌入会带来显著的负面影响：
读取性能影响：随着文档大小的增长，将消耗更多的内存。  
更新性能影响：随着文档大小的增长，以及在这样的文档上执行更新操作以附加数据，  
最终MongoDB会将该文档移动到具有更大可用空间的区域。  
- 文档具有16MB这固定大小限制。

总之，MongoDb中的模式设计取决于应用程序的需求和查询。  
当需要将数据放在一起进行访问或需要进行原子更新时，嵌入将产生积极影响  
如果查询时需要更多的灵活性或者拥有多对多关系，使用引用。   

#### 数据生命周期管理  
索引适合读操作频繁，不适合写频繁  

#### 分片
是否要对数据进行分区。一个集合可以通过跨机器群分布的文档来分区的  
这些文档就被称为碎片。这样会对性能产生显著的影响。  

#### 大量的集合
对比单集合中存储数据：
- 选择多个集合用于数据存储是没有性能损失的  
- 在搞吞吐量的批处理应用程序中，为不同的数据类型使用单独的集合会提高性能。   

#### 文档增长
有一些更新，将一个元素推送到一个数组中，添加新字段等  
会造成文档大小的增长，这将导致文档从一个位置移动到另一个位置，涉及到内存拷贝   
