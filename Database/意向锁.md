### 意向锁

表是由行组成的，当我们向某个表加锁时，一方面需要检查该锁的申请是否与原有的表

级锁相容；另一方面，还要检查该锁是否与表中的每一行上的锁相容。比如一个事务要在一

个表上加 S 锁，如果表中的一行已被另外的事务加了 X 锁，那么该锁的申请也应被阻塞。

如果表中的数据很多，逐行检查锁标志的开销将很大，系统的性能将会受到影响。为了解决

这个问题，可以在表级引入新的锁类型来表示其所属行的加锁情况，这就引出了“意向锁”

的概念。

意向锁的含义是如果对一个结点加意向锁，则说明该结点的下层结点正在被加锁；对任

一结点加锁时，必须先对它的上层结点加意向锁。如：对表中的任一行加锁时，必须先对它

所在的表加意向锁，然后再对该行加锁。这样一来，事务对表加锁时，就不再需要检查表中

每行记录的锁标志位了，系统效率得以大大提高。